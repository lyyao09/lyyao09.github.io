<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lyyao09.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="问题背景karaf框架没有直接依赖log4j包，所以简单的升级项目中的log4j或实际项目中没有log4j，都无法解决最近发现的漏洞问题（CVE-2021-44228、CVE-2021-45046、CVE-2021-45046）。 分析过程分析发现，karaf框架实际依赖的日志包是org.ops4j.pax.logging.xxx，而org.ops4j.pax.logging.xxx依赖了log4">
<meta property="og:type" content="article">
<meta property="og:title" content="Karaf框架升级Lg4j历程">
<meta property="og:url" content="https://lyyao09.github.io/2021/12/25/java/Karaf%E6%A1%86%E6%9E%B6%E5%8D%87%E7%BA%A7Lg4j%E5%8E%86%E7%A8%8B/index.html">
<meta property="og:site_name" content="云原生知识星球">
<meta property="og:description" content="问题背景karaf框架没有直接依赖log4j包，所以简单的升级项目中的log4j或实际项目中没有log4j，都无法解决最近发现的漏洞问题（CVE-2021-44228、CVE-2021-45046、CVE-2021-45046）。 分析过程分析发现，karaf框架实际依赖的日志包是org.ops4j.pax.logging.xxx，而org.ops4j.pax.logging.xxx依赖了log4">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-12-25T09:15:21.000Z">
<meta property="article:modified_time" content="2024-08-04T11:49:03.180Z">
<meta property="article:author" content="LeaoYao">
<meta property="article:tag" content="karaf">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://lyyao09.github.io/2021/12/25/java/Karaf%E6%A1%86%E6%9E%B6%E5%8D%87%E7%BA%A7Lg4j%E5%8E%86%E7%A8%8B/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Karaf框架升级Lg4j历程 | 云原生知识星球</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">云原生知识星球</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lyyao09.github.io/2021/12/25/java/Karaf%E6%A1%86%E6%9E%B6%E5%8D%87%E7%BA%A7Lg4j%E5%8E%86%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LeaoYao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云原生知识星球">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Karaf框架升级Lg4j历程
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-25 09:15:21" itemprop="dateCreated datePublished" datetime="2021-12-25T09:15:21+00:00">2021-12-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-08-04 11:49:03" itemprop="dateModified" datetime="2024-08-04T11:49:03+00:00">2024-08-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>13 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h2><p><code>karaf</code>框架没有直接依赖<code>log4j</code>包，所以简单的升级项目中的<code>log4j</code>或实际项目中没有<code>log4j</code>，都无法解决最近发现的漏洞问题（<strong>CVE-2021-44228</strong>、<strong>CVE-2021-45046</strong>、<strong>CVE-2021-45046</strong>）。</p>
<h2 id="分析过程"><a href="#分析过程" class="headerlink" title="分析过程"></a>分析过程</h2><p>分析发现，<code>karaf</code>框架实际依赖的日志包是<code>org.ops4j.pax.logging.xxx</code>，而<code>org.ops4j.pax.logging.xxx</code>依赖了<code>log4j</code>，相当于做了一层包装。所以，要解决漏洞，有三种升级方式：</p>
<ol>
<li><strong>升级框架</strong>：这个影响就比较大了，而且框架的版本发布周期比较慢，目前还没有编译好的框架包，要升级框架就需要自己编译出所有的框架包，风险较大；</li>
<li><strong>升级依赖包</strong>：影响较小，如果没有配置依赖包的地方，可能无法升级；（实际确认，无法单独升级）</li>
<li><strong>修改当前版本依赖包并重新编译</strong>：影响较小，如果与最新版本跨度较大，可能修改点会很多；</li>
</ol>
<p>综合比较，考虑使用第3个方案走走看，从参考资料[1]的代码提交记录看，<code>org.ops4j.pax.logging</code>为了解决<code>log4j</code>漏洞，仅涉及依赖包<code>log4j</code>的版本升级，版本跨度是从<code>1.11.9</code>升级到<code>1.11.12</code>，跨度不大，实际有哪些修改点，先编译看看有没有问题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pom.xml</span><br><span class="line">        &lt;version.org.apache.felix.configadmin&gt;1.9.20&lt;/version.org.apache.felix.configadmin&gt;</span><br><span class="line">        &lt;version.org.apache.felix.framework&gt;5.6.12&lt;/version.org.apache.felix.framework&gt;</span><br><span class="line">        &lt;version.org.apache.felix6.framework&gt;6.0.3&lt;/version.org.apache.felix6.framework&gt;</span><br><span class="line">-       &lt;version.org.apache.logging.log4j&gt;2.16.0&lt;/version.org.apache.logging.log4j&gt;</span><br><span class="line">+       &lt;version.org.apache.logging.log4j&gt;2.17.0&lt;/version.org.apache.logging.log4j&gt;</span><br><span class="line">        &lt;version.org.apache.servicemix.bundles.javax-inject&gt;1_3&lt;/version.org.apache.servicemix.bundles.javax-inject&gt;</span><br><span class="line">        &lt;version.org.jboss.logging&gt;3.4.1.Final&lt;/version.org.jboss.logging&gt;</span><br><span class="line">        &lt;version.org.mockito&gt;3.7.7&lt;/version.org.mockito&gt;</span><br></pre></td></tr></table></figure>

<p>下载当前使用的版本，从源码的各模块看，可能需要<code>jdk9</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@node org.ops4j.pax.logging-logging-1.11.9]# ll</span><br><span class="line">total 144</span><br><span class="line">-rw-r--r--  1 root root   939 Feb 23  2021 CONTRIBUTORS.txt</span><br><span class="line">-rw-r--r--  1 root root   755 Feb 23  2021 license-header.txt</span><br><span class="line">-rw-r--r--  1 root root 12525 Feb 23  2021 LICENSE.txt</span><br><span class="line">drwxr-xr-x  4 root root    99 Dec 21 17:51 pax-logging-api</span><br><span class="line">drwxr-xr-x  4 root root    46 Dec 21 17:51 pax-logging-api-java9</span><br><span class="line">drwxr-xr-x  4 root root    46 Dec 21 17:51 pax-logging-it</span><br><span class="line">drwxr-xr-x  6 root root   106 Feb 23  2021 pax-logging-it-karaf</span><br><span class="line">drwxr-xr-x  4 root root    99 Dec 21 17:51 pax-logging-log4j2</span><br><span class="line">drwxr-xr-x  4 root root    99 Dec 21 17:51 pax-logging-log4j2-extra</span><br><span class="line">drwxr-xr-x  4 root root    99 Dec 21 17:51 pax-logging-logback</span><br><span class="line">drwxr-xr-x  2 root root    21 Feb 23  2021 pax-logging-report</span><br><span class="line">drwxr-xr-x 10 root root   166 Feb 23  2021 pax-logging-samples</span><br><span class="line">drwxr-xr-x  4 root root    99 Dec 21 17:51 pax-logging-service</span><br><span class="line">-rw-r--r--  1 root root 46604 Dec 21 17:46 pom.xml</span><br><span class="line">-rw-r--r--  1 root root 67356 Feb 23  2021 readme.adoc</span><br><span class="line">drwxr-xr-x  3 root root    18 Feb 23  2021 src</span><br></pre></td></tr></table></figure>

<p>先下载个<code>maven:3.3.9-jdk-9</code>编译镜像试试：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@node]# </span><span class="language-bash">docker pull maven:3.3.9-jdk-9</span></span><br><span class="line">3.3.9-jdk-9: Pulling from library/maven</span><br><span class="line">...</span><br><span class="line">2ce3b259f3e2: Pull complete</span><br><span class="line">Digest: sha256:ad6b04c52e7f83c05e8840e0b1de0c39ba097c1e40efb294e740db303468cbe8</span><br><span class="line">Status: Downloaded newer image for maven:3.3.9-jdk-9</span><br><span class="line">docker.io/library/maven:3.3.9-jdk-9</span><br></pre></td></tr></table></figure>

<p>启动编译，先尝试编译原始版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@node]# </span><span class="language-bash">docker run -it -v /home:/home docker.io/library/maven:3.3.9-jdk-9 bash</span></span><br><span class="line">root@aae0956cb558:/home# cd org.ops4j.pax.logging-logging-1.11.9</span><br><span class="line">root@aae0956cb558:/home/org.ops4j.pax.logging-logging-1.11.9# mvn clean install -Dmaven.test.skip=true</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[WARNING] Error injecting: org.apache.maven.wagon.providers.http.HttpWagon</span><br><span class="line">java.lang.ExceptionInInitializerError</span><br><span class="line">        at java.base/javax.crypto.JceSecurityManager.&lt;clinit&gt;(JceSecurityManager.java:66)</span><br><span class="line">        at java.base/javax.crypto.Cipher.getConfiguredPermission(Cipher.java:2610)</span><br><span class="line">        at java.base/javax.crypto.Cipher.getMaxAllowedKeyLength(Cipher.java:2634)</span><br><span class="line">        ...</span><br><span class="line">Caused by: java.lang.SecurityException: Can not initialize cryptographic mechanism</span><br><span class="line">        at java.base/javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:118)</span><br><span class="line">        ... 96 more</span><br><span class="line">Caused by: java.lang.SecurityException: Can&#x27;t read cryptographic policy directory: unlimited</span><br><span class="line">        at java.base/javax.crypto.JceSecurity.setupJurisdictionPolicies(JceSecurity.java:324)</span><br><span class="line">        at java.base/javax.crypto.JceSecurity.access$000(JceSecurity.java:73)</span><br><span class="line">        at java.base/javax.crypto.JceSecurity$1.run(JceSecurity.java:109)</span><br><span class="line">        at java.base/javax.crypto.JceSecurity$1.run(JceSecurity.java:106)</span><br><span class="line">        at java.base/java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">        at java.base/javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:105)</span><br><span class="line">        ... 96 more</span><br></pre></td></tr></table></figure>

<p>参考资料[2]，问题出在编译镜像的<code>$JAVA_HOME/conf</code>命令下找不到一个安全相关的配置文件，查看一下发现<code>conf</code>文件夹都不存在，说明编译镜像有问题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@aae0956cb558:/home/org.ops4j.pax.logging-logging-1.11.9# env</span><br><span class="line">JAVA_HOME=/usr/lib/jvm/java-9-openjdk-amd64</span><br><span class="line"></span><br><span class="line">root@aae0956cb558:/home/org.ops4j.pax.logging-logging-1.11.9# ls /usr/lib/jvm/java-9-openjdk-amd64</span><br><span class="line">bin  docs  include  jmods  legal  lib  man  src.zip</span><br><span class="line"></span><br><span class="line">//正常情况下$JAVA_HOME/conf目录下有以下文件</span><br><span class="line">java-9-openjdk  logging.properties  management  net.properties  security  sound.properties</span><br></pre></td></tr></table></figure>

<p>那就换个新版本试试，下载<code>maven:3.6-openjdk-11</code>编译镜像：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@node]# </span><span class="language-bash">docker pull maven:3.6-openjdk-11</span></span><br><span class="line">3.6-openjdk-11: Pulling from library/maven</span><br><span class="line">...s</span><br><span class="line">Digest: sha256:1d29ccf46ef2a5e64f7de3d79a63f9bcffb4dc56be0ae3daed5ca5542b38aa2d</span><br><span class="line">Status: Downloaded newer image for maven:3.6-openjdk-11</span><br><span class="line">docker.io/library/maven:3.6-openjdk-11</span><br></pre></td></tr></table></figure>

<p>启动编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@node]# </span><span class="language-bash">docker run -it -v /home:/home maven:3.6-openjdk-11 bash</span></span><br><span class="line">root@ff2407bc2d9e:/# cd /home/org.ops4j.pax.logging-logging-1.11.9</span><br><span class="line">root@ff2407bc2d9e:/home/org.ops4j.pax.logging-logging-1.11.9# mvn clean install -Dmaven.test.skip=true</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">Downloading from knopflerfish: http://resources.knopflerfish.org/repo/maven2/release/org/ops4j/master/4.3.0/master-4.3.0.pom</span><br><span class="line">...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ pax-logging-api-java9 ---</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-enforcer-plugin:3.0.0-M1:enforce (enforce-maven) @ pax-logging-api-java9 ---</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-toolchains-plugin:3.0.0:toolchain (default) @ pax-logging-api-java9 ---</span><br><span class="line">[INFO] Required toolchain: jdk [ version=&#x27;[9, )&#x27; ]</span><br><span class="line">[ERROR] No toolchain found for type jdk</span><br><span class="line">[ERROR] Cannot find matching toolchain definitions for the following toolchain types:</span><br><span class="line">jdk [ version=&#x27;[9, )&#x27; ]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Summary for OPS4J Pax Logging (Build POM) 1.11.9:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] OPS4J Pax Logging (Build POM) ...................... SUCCESS [ 35.399 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API (Java9) .................... FAILURE [ 10.045 s]</span><br><span class="line">...</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-toolchains-plugin:3.0.0:toolchain (default) on project pax-logging-api-java9: Cannot find matching toolchain definitions for the following toolchain types:</span><br><span class="line">[ERROR] jdk [ version=&#x27;[9, )&#x27; ]</span><br><span class="line">[ERROR] Please make sure you define the required toolchains in your ~/.m2/toolchains.xml file.</span><br></pre></td></tr></table></figure>

<p>第一个问题解决了，但从报错信息看，应该是要求<code>jdk9</code>的版本，那就再换一个<code>maven:3.5-jdk-9-slim</code>镜像：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@node]# </span><span class="language-bash">docker pull maven:3.5-jdk-9-slim</span></span><br><span class="line">3.5-jdk-9-slim: Pulling from library/maven</span><br><span class="line">...</span><br><span class="line">7afb9733d3e4: Pull complete</span><br><span class="line">Digest: sha256:f5d85a2b5498c0a36a6515722e108969ff2fcfec5bef6c8ef83c8ebc4b671af1</span><br><span class="line">Status: Downloaded newer image for maven:3.5-jdk-9-slim</span><br><span class="line">docker.io/library/maven:3.5-jdk-9-slim</span><br></pre></td></tr></table></figure>

<p>继续编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@node]# </span><span class="language-bash">docker run -it -v /home:/home docker.io/library/maven:3.5-jdk-9-slim  bash</span></span><br><span class="line">root@895be557c3cd:/# cd /home/org.ops4j.pax.logging-logging-1.11.9</span><br><span class="line">root@895be557c3cd:/home/org.ops4j.pax.logging-logging-1.11.9# mvn clean install -Dmaven.test.skip=true</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">Downloading from knopflerfish: http://resources.knopflerfish.org/repo/maven2/release/org/ops4j/master/4.3.0/master-4.3.0.pom</span><br><span class="line">...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ pax-logging-api-java9 ---</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-enforcer-plugin:3.0.0-M1:enforce (enforce-maven) @ pax-logging-api-java9 ---</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-toolchains-plugin:3.0.0:toolchain (default) @ pax-logging-api-java9 ---</span><br><span class="line">[INFO] Required toolchain: jdk [ version=&#x27;[9, )&#x27; ]</span><br><span class="line">[ERROR] No toolchain found for type jdk</span><br><span class="line">[ERROR] Cannot find matching toolchain definitions for the following toolchain types:</span><br><span class="line">jdk [ version=&#x27;[9, )&#x27; ]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Summary:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] OPS4J Pax Logging (Build POM) 1.11.9 ............... SUCCESS [01:27 min]</span><br><span class="line">[INFO] OPS4J Pax Logging - API (Java9) .................... FAILURE [ 17.560 s]</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-toolchains-plugin:3.0.0:toolchain (default) on project pax-logging-api-java9: Cannot find matching toolchain definitions for the following toolchain types:</span><br><span class="line">[ERROR] jdk [ version=&#x27;[9, )&#x27; ]</span><br><span class="line">[ERROR] Please make sure you define the required toolchains in your ~/.m2/toolchains.xml file.</span><br></pre></td></tr></table></figure>

<p>当前编译镜像已经符合要求了，但依然报错，参考资料[3]，需要在<code>~/.m2/</code>目录下创建<code>toolchains.xml</code>文件并做相关配置：</p>
<p>通过<code>env</code>命令查看<code>java</code>的相关环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@895be557c3cd:/home/org.ops4j.pax.logging-logging-1.11.9# env</span><br><span class="line">...</span><br><span class="line">JAVA_HOME=/docker-java-home</span><br><span class="line">JAVA_VERSION=9.0.4+12</span><br><span class="line">JAVA_DEBIAN_VERSION=9.0.4+12-4</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>修改<code>version</code>和<code>jdkHome</code>字段：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">root@895be557c3cd:/home/org.ops4j.pax.logging-logging-1.11.9# cat ~/.m2/toolchains.xml</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;toolchains xmlns=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">  xsi:schemaLocation=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0 http://maven.apache.org/xsd/toolchains-1.1.0.xsd&quot;&gt;</span><br><span class="line">  &lt;toolchain&gt;</span><br><span class="line">    &lt;type&gt;jdk&lt;/type&gt;</span><br><span class="line">    &lt;provides&gt;</span><br><span class="line">      &lt;version&gt;9&lt;/version&gt;</span><br><span class="line">      &lt;vendor&gt;oracle&lt;/vendor&gt;</span><br><span class="line">    &lt;/provides&gt;</span><br><span class="line">    &lt;configuration&gt;</span><br><span class="line">      &lt;jdkHome&gt;/docker-java-home&lt;/jdkHome&gt;</span><br><span class="line">    &lt;/configuration&gt;</span><br><span class="line">  &lt;/toolchain&gt;</span><br><span class="line">&lt;/toolchains&gt;</span><br></pre></td></tr></table></figure>

<p>继续编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@895be557c3cd:/home/org.ops4j.pax.logging-logging-1.11.9# mvn clean install -Dmaven.test.skip=true</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO] Inspecting build with total of 19 modules...</span><br><span class="line">[INFO] Installing Nexus Staging features:</span><br><span class="line">[INFO]   ... total of 19 executions of maven-deploy-plugin replaced with nexus-staging-maven-plugin</span><br><span class="line">[INFO] Reactor Summary:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] OPS4J Pax Logging (Build POM) 1.11.9 ............... SUCCESS [  0.335 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API (Java9) .................... SUCCESS [ 40.867 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API ............................ SUCCESS [ 51.690 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API tests ...................... FAILURE [02:11 min]</span><br></pre></td></tr></table></figure>

<p>失败在<code>test</code>模块，测试模块不影响，修改<code>pom.xml</code>注释掉即可；</p>
<p>再编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@895be557c3cd:/home/org.ops4j.pax.logging-logging-1.11.9# mvn clean install -Dmaven.test.skip=true</span><br><span class="line">...</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Summary:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] OPS4J Pax Logging (Build POM) 1.11.9 ............... SUCCESS [  0.275 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API (Java9) .................... SUCCESS [  1.873 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API ............................ SUCCESS [  4.672 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Log4Jv1 implementation ......... SUCCESS [ 39.435 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Log4Jv2 implementation ......... SUCCESS [  8.208 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Log4j v2 Extra packages ........ SUCCESS [  0.131 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Logback implementation ......... SUCCESS [ 15.241 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Integration Tests .............. SUCCESS [01:48 min]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf .......................... SUCCESS [  0.014 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf KAR Logger ............... SUCCESS [  0.148 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf KAR ...................... SUCCESS [ 28.098 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf Distribution ............. SUCCESS [  2.002 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf Integration Tests 1.11.9 . SUCCESS [ 36.557 s]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time: 04:07 min</span><br><span class="line">[INFO] Finished at: 2021-12-21T09:45:18Z</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>不容易，终于成功了！开始修改<code>pod.xml</code>，把依赖的<code>log4j</code>包升级上去：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- &lt;version.org.apache.logging.log4j&gt;2.14.0&lt;/version.org.apache.logging.log4j&gt;</span><br><span class="line">+ &lt;version.org.apache.logging.log4j&gt;2.17.0&lt;/version.org.apache.logging.log4j&gt;</span><br></pre></td></tr></table></figure>

<p>编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@895be557c3cd:/home/org.ops4j.pax.logging-logging-1.11.9# mvn clean install -Dmaven.test.skip=true</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO] Inspecting build with total of 13 modules...</span><br><span class="line">[INFO] Installing Nexus Staging features:</span><br><span class="line">[INFO]   ... total of 13 executions of maven-deploy-plugin replaced with nexus-staging-maven-plugin</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">...</span><br><span class="line">[ERROR] COMPILATION ERROR :</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] /home/org.ops4j.pax.logging-logging-1.11.9/pax-logging-log4j2/src/main/java/org/apache/logging/log4j/core/impl/ThrowableProxy.java:[85,54] cannot find symbol</span><br><span class="line">  symbol:   variable EMPTY_THROWABLE_PROXY_ARRAY</span><br><span class="line">  location: class org.apache.logging.log4j.core.impl.ThrowableProxyHelper</span><br><span class="line">[INFO] 1 error</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Summary:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] OPS4J Pax Logging (Build POM) 1.11.9 ............... SUCCESS [  0.302 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API (Java9) .................... SUCCESS [  1.836 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API ............................ SUCCESS [ 10.592 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Log4Jv1 implementation ......... SUCCESS [  2.017 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Log4Jv2 implementation ......... FAILURE [  4.279 s]</span><br></pre></td></tr></table></figure>

<p>又报错了，找到官方升级过<code>log4j</code>的版本，发现<code>ThrowableProxy</code>方法的构造方法里<code>suppressedProxies</code>字段的赋值有变化，老版本是<code>ThrowableProxyHelper.EMPTY_THROWABLE_PROXY_ARRAY</code>，而新版本变成了<code>ThrowableProxy.EMPTY_ARRAY</code>。问题不大，改一下就行；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">src/main/java/org/apache/logging/log4j/core/impl/ThrowableProxy.java</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThrowableProxy</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> ThrowableProxy[] EMPTY_ARRAY = &#123;&#125;;</span><br><span class="line">	ThrowableProxy() &#123;</span><br><span class="line">        <span class="built_in">this</span>.throwable = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.name = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.extendedStackTrace = ExtendedStackTraceElement.EMPTY_ARRAY;</span><br><span class="line">        <span class="built_in">this</span>.causeProxy = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.message = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.localizedMessage = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.suppressedProxies = ThrowableProxy.EMPTY_ARRAY;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>再次编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">root@895be557c3cd:/home/org.ops4j.pax.logging-logging-1.11.9# mvn clean install -Dmaven.test.skip=true</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO] Inspecting build with total of 13 modules...</span><br><span class="line">[INFO] Installing Nexus Staging features:</span><br><span class="line">[INFO]   ... total of 13 executions of maven-deploy-plugin replaced with nexus-staging-maven-plugin</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Summary:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] OPS4J Pax Logging (Build POM) 1.11.9 ............... SUCCESS [  0.290 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API (Java9) .................... SUCCESS [  1.819 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - API ............................ SUCCESS [  4.717 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Log4Jv1 implementation ......... SUCCESS [  2.057 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Log4Jv2 implementation ......... SUCCESS [  2.654 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Log4j v2 Extra packages ........ SUCCESS [  0.144 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Logback implementation ......... SUCCESS [  0.908 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Integration Tests .............. SUCCESS [  4.402 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf .......................... SUCCESS [  0.012 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf KAR Logger ............... SUCCESS [  0.138 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf KAR ...................... SUCCESS [  1.588 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf Distribution ............. SUCCESS [  2.114 s]</span><br><span class="line">[INFO] OPS4J Pax Logging - Karaf Integration Tests 1.11.9 . SUCCESS [  0.163 s]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time: 23.440 s</span><br><span class="line">[INFO] Finished at: 2021-12-21T09:51:37Z</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>升级<code>log4j</code>的版本编译成功。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>把新编译的<code>pax-logging-api</code>和<code>pax-logging-log4j</code>替换到依赖仓库中，重新编译交付件，验证漏洞解决，日志功能正常。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li><a target="_blank" rel="noopener" href="https://github.com/ops4j/org.ops4j.pax.logging">https://github.com/ops4j/org.ops4j.pax.logging</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/docker-library/openjdk/issues/101">https://github.com/docker-library/openjdk/issues/101</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/yiqiu3812/article/details/103298980">https://blog.csdn.net/yiqiu3812/article/details/103298980</a></li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/karaf/" rel="tag"># karaf</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/12/18/k8s/K8S%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5-%E6%8C%82%E8%BD%BDSubpath%E7%9A%84%E5%AE%B9%E5%99%A8%E5%9C%A8Configmap%E5%8F%98%E6%9B%B4%E5%90%8E%E9%87%8D%E5%90%AF%E6%97%B6%E6%8C%82%E8%BD%BD%E5%A4%B1%E8%B4%A5/" rel="prev" title="K8S问题排查-挂载Subpath的容器在Configmap变更后重启时挂载失败">
      <i class="fa fa-chevron-left"></i> K8S问题排查-挂载Subpath的容器在Configmap变更后重启时挂载失败
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/02/26/docker/Docker%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5-%E5%BC%82%E5%B8%B8%E6%96%AD%E7%94%B5%E5%AF%BC%E8%87%B4Docker%E5%90%AF%E5%8A%A8%E5%8D%A1%E4%BD%8F/" rel="next" title="Docker问题排查-异常断电导致Docker启动卡住">
      Docker问题排查-异常断电导致Docker启动卡住 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF"><span class="nav-number">1.</span> <span class="nav-text">问题背景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="nav-number">2.</span> <span class="nav-text">分析过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">3.</span> <span class="nav-text">解决方案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-number">4.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LeaoYao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">94</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LeaoYao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
